<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 指明这个映射文件adminMapper.xml的逻辑路径,如果与接口建立映射，那么逻辑路径应该与接口的物理路径一致-->
<mapper namespace="com.dao.ProductDao">

    <!-- 外键关联 -->
    <resultMap type="Product" id="product">
        <!-- 关联对象属性association，property指属性名， -->
        <association property="product_type_id" javaType="Product_type" column="product_type_id" select="com.dao.Product_typeDao.get">
        </association>
        <association property="user_id" javaType="User" column="user_id" select="com.dao.UserDao.get">
        </association>
    </resultMap>

    <!-- parameterType表示要传入的参数的类型 ，resultType表示要返回的数据的类型-->

    <!-- 查询所有商品 -->
    <select id="all"  resultMap="product">
        select * from products
    </select>

    <!--根据id查询商品-->
    <select id="get" resultMap="product">
        SELECT * from products where id=#{id}
    </select>

    <!--根据分类id查询商品-->
    <select id="product_type_get" resultMap="product">
        select * from products where product_type_id=#{product_type_id}
    </select>

    <!--根据日期从新到旧排序商品-->
    <select id="product_new" resultMap="product">
        SELECT * from products  order by time DESC
    </select>

    <!--根据热门程度排序商品-->
    <select id="product_hot" resultMap="product">
       SELECT * from products ORDER BY click desc
    </select>

    <!--根据id上架商品-->
    <update id="display_t" >
        UPDATE products SET display=1 where id=#{id}
    </update>

    <!--根据id下架商品-->
    <update id="display_f" >
        UPDATE products SET display=0 where id=#{id}
    </update>

    <!--根据id删除商品-->
    <delete id="del">
        DELETE from products where id=#{id}
    </delete>

    <!--添加商品-->
    <insert id="in" >
    INSERT INTO products VALUES (#{phone},#{qq},null,#{name},#{price},#{remake},#{image},#{sum},#{time},
    #{click},#{product_type_id.id},#{prices},#{display},#{user_id.id},#{weixin})
    </insert>
</mapper>