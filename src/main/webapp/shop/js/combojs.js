/*_combo_cut*/define("statics/zhe/dealList/js/startLogin",function(s){s("statics/zhe/common/js/fireReady"),s("statics/zhe/dealList/js/taopi18610")});/*_combo_cut*/define("statics/zhe/common/js/fireReady",function(e,n,i){function o(){$(document).ready(function(){PubSub.fire("ready")})}o(),i.exports={ready:o}});/*_combo_cut*/define("statics/zhe/common/js/stat/picstat",function(e,t,o){function i(e,t){var o=[];if(t)for(var i in t)t.hasOwnProperty(i)&&o.push(i+"="+t[i]);t.hiveid||o.push("hiveid="+n()),o.push("clsct="+(new Date).getTime()),o=o.join("&");var s=document.createElement("img");s.src="//analysis.tuanimg.com/"+e+".gif?"+o,s.onload=function(){$(this).remove()},document.body.appendChild(s)}function n(){var e="";try{e=$.cookie("__utma").split(".")[1]+$.cookie("__utma").split(".")[2]}catch(t){console&&console.error&&console.error(t.message)}return e}o.exports={doStat:i,getHiveid:n}});/*_combo_cut*/define("statics/zhe/components/login_reg_dialog/registertpl.ejs",function(require,exports,module){function render(data){var __p=[],_p=function(n){__p.push(n)};with(data)_p('<div class="login_reg_dialog_wrapper">\r\n      <a class="loglink" href="javascript:void(0)">立即登录</a>\r\n      <form method="post" name="regform">\r\n          <div class="signupnewbox">\r\n              <h3><span>注册折800—享独家折扣</span></h3>\r\n              <input type="hidden" id="reg_authenticity_token" value="">\r\n              <ul class="clear">\r\n                  <li class="name">\r\n                      <div class="liwrapper">\r\n                          <label>手机号码</label>\r\n                          <input id="reg_mobile" type="text" class="txt1" value="请输入常用的手机号" title="请输入常用的手机号">\r\n                          <ins></ins>\r\n                      </div>\r\n                  </li>\r\n                  <li class="password">\r\n                      <div class="liwrapper">\r\n                          <label>设置密码</label>\r\n                          <input id="txt_password" type="text" class="txt1" value="6-24位字符，不能是纯数字">\r\n                          <input id="reg_password" type="password" class="txt1 change" value="" style="display:none" maxlength="24">\r\n                          <ins></ins>\r\n                      </div>\r\n                  </li>\r\n                  <li class="password">\r\n                      <div class="liwrapper">\r\n                          <label>确认密码</label>\r\n                          <input id="txt_confirmpwd" type="text" class="txt1" value="请再次输入密码">\r\n                          <input id="reg_confirmpwd" type="password" class="txt1 change" value="" style="display:none" maxlength="24">\r\n                          <ins></ins>\r\n                      </div>\r\n                  </li>\r\n                  <li class="validatepalceholder">\r\n                      <div id="validatewrapper"></div>\r\n                  </li>\r\n                  <li class="captcha_box token">\r\n                      <div class="liwrapper">\r\n                          <input id="reg_captcha" type="text" class="txt1" disableautocomplete="" autocomplete="off" name="captcha" title="验证码" value="验证码">\r\n                      </div>\r\n                      <a id="send_reg_captcha" href="javascript:void(0)">发送验证码</a>\r\n                  </li>\r\n                  <li class="btn">\r\n                      <input id="reg_submit" type="button" value="同意协议并注册" class="sign statisticalObject">\r\n                  </li>\r\n                  <li class="txt">\r\n                      <span>\r\n                          <a href="//help.zhe800.com/detail/82" target="_blank">《折800用户服务协议》</a>\r\n                      </span>\r\n                  </li>\r\n              </ul>\r\n          </div>\r\n      </form>\r\n  </div>');return __p.join("")}module.exports=render});/*_combo_cut*/define("statics/zhe/common/js/validate/validator",function(t,i,a){var o=function(t){$.extend(this,{init:function(){},validate:function(){},refresh:function(){},validateStatus:0,validateUrl:window.location.protocol+"//acode.zhe800.com/t/verify/do_validate",statOpts:{alitimes:1,alitoken:""}},t)};a.exports=o});/*_combo_cut*/define("statics/zhe/common/js/validate/aliyunValidator",function(t,a,e){var i=t("statics/zhe/common/js/validate/validator"),n=function(t){var a=new i({validateStatus:0,init:function(t){var a=this;if($.extend(this,t),t.ins=this,window.noCaptcha)s(t,function(t){a.validateSuc(t)});else{$("#_umfp").length||$("body").append('<div id="_umfp" style="display:inline;width:1px;height:1px;overflow:hidden"></div>');var e=(new Date).getTime();$("head").append('<link type="text/css" href="'+window.location.protocol+"//g.alicdn.com/sd/ncpc/nc.css?t="+e+'" rel="stylesheet"/>'),$.getScript(window.location.protocol+"//g.alicdn.com/sd/ncpc/nc.js?t="+e,function(){s(t,function(t){a.validateSuc(t)})})}},validate:function(t){var t=$.extend({success:function(){},error:function(){}},t);if(!this.validateStatus||!this.validateData)return void t.error({msg:"请完成滑块验证"});var a={aliyun_csessionid:this.validateData.csessionid,aliyun_sig:this.validateData.sig,aliyun_token:this.validateData.token,aliyun_scene:this.nc_scene,validate_token:this.parent.validate_data.validate_token};this.parent.validate_data.business_code&&(a.business_code=this.parent.validate_data.business_code),$.ajax({url:this.validateUrl,type:"GET",dataType:"JSONP",jsonpCallback:"validateAliyun"+(new Date).getTime(),data:a,success:function(a){1==a.status?t.success(a):t.error({msg:a.msg.error_content,failure_code:a.failure_code})},error:function(){t.error({msg:"网络错误"})}})},refresh:function(){this.validateStatus=0,this.validateData=null;var t=this;s(this,function(a){t.validateSuc(a)})}});return a.validateSuc=function(t){this.validateStatus=1,this.validateData=t;try{this.validateSucFn&&"function"==typeof this.validateSucFn&&this.validateSucFn()}catch(a){console.log(a)}},a.parent=t,a},s=function(t,a){var e=new noCaptcha,i=t.afs_appkey,n=t.nc_scene,s=[i,(new Date).getTime(),t.ins.parent.validate_data.validate_token].join(":");t.ins.statOpts.alitoken=s;var c={renderTo:t.renderTo,appkey:i,scene:n,token:s,callback:function(t){a(t)},verifycallback:function(){t.ins.statOpts.alitimes=2}};e.init(c)};e.exports={createIns:n}});/*_combo_cut*/define("statics/zhe/common/js/validate/imgValidator",function(t,a,e){var s=t("statics/zhe/common/js/validate/validator"),n=function(t){var a=new s({validateStatus:1,init:function(t){$.extend(this,t),t.success(this.parent.validate_data)},validate:function(t){var t=$.extend({success:function(){},error:function(){}},t);if(!t.content)return void t.error({msg:"请填写验证码"});var a={validate_token:this.parent.validate_data.validate_token,content:t.content};this.parent.validate_data.business_code&&(a.business_code=this.parent.validate_data.business_code),console.log(a),$.ajax({url:this.validateUrl,type:"GET",dataType:"JSONP",jsonpCallback:"validateImg",data:a,success:function(a){1==a.status?t.success(a):t.error({msg:a.msg.error_content})},error:function(){t.error({msg:"网络错误"})}})},refresh:function(t){var a={source_type:this.parent.source_type,validate_type:2};this.parent.validate_data.business_code&&(a.business_code=this.parent.validate_data.business_code);var e=this;$.ajax({url:window.location.protocol+"//acode.zhe800.com/t/verify/get_token",type:"GET",dataType:"JSONP",jsonpCallback:"validateRefreshImgToken"+ +(new Date).getTime(),data:a,success:function(a){a&&1==a.status&&(e.parent.validate_data.validate_token=a.validate_token,$.extend(e.parent.validate_data,a.validate_adds),t(a.validate_adds))}})}});return a.parent=t,a};e.exports={createIns:n}});/*_combo_cut*/define("statics/zhe/common/js/validate/geetestValidator",function(e,t,a){var i=e("statics/zhe/common/js/validate/validator");window.initGeetestFunction=function(){o()};var n={},s=null,c=function(e){var t=new i({validateStatus:0,init:function(e){$.extend(n,e),window.Geetest?window.initGeetestFunction():$("body").append('<script id="geetest_js" async=true src="'+window.location.protocol+'//api.geetest.com/get.php?callback=initGeetestFunction"></script>')},validate:function(e){var e=$.extend({success:function(){},error:function(){}},e);if(!this.validateStatus||!this.validateData)return void e.error({msg:"请完成滑块验证"});var t={validate_token:this.parent.validate_data.validate_token,geetest_validate:this.validateData.geetest_validate,geetest_seccode:this.validateData.geetest_seccode,geetest_challenge:this.validateData.geetest_challenge};this.parent.validate_data.business_code&&(t.business_code=this.parent.validate_data.business_code),console.log(t),$.ajax({url:this.validateUrl,type:"GET",dataType:"JSONP",jsonpCallback:"validateGeeTest"+ +(new Date).getTime(),data:t,success:function(t){1==t.status?e.success(t):e.error({msg:t.msg.error_content})},error:function(){e.error({msg:"网络错误"})}})}});return t.parent=e,s=t,t},o=function(){s.embed_captcha=window.Geetest({gt:n.gt,product:n.product||"float"}).appendTo($(n.renderTo)),s.embed_captcha.onSuccess(function(){s.validateStatus=1,s.embed_captcha.hideRefresh(),s.validateData=s.embed_captcha.getValidate();try{n.validateSucFn&&"function"==typeof n.validateSucFn&&n.validateSucFn()}catch(e){console.log(e)}})};a.exports={createIns:c}});/*_combo_cut*/define("statics/zhe/common/js/validate/validate",function(t,e,a){var s=t("statics/zhe/common/js/validate/aliyunValidator"),i=t("statics/zhe/common/js/validate/imgValidator"),o=t("statics/zhe/common/js/validate/geetestValidator"),n=function(t){var t=$.extend({},t);if(void 0===t.source_type||null===t.source_type)throw new Error("source_type 为必须参数");this.source_type=t.source_type,this.business_code=t.business_code||"",this.validate_type=t.validate_type||"",this.validate_data={business_code:this.business_code},this.validator=null,this.getToken(t)};n.prototype.getToken=function(t){var t=$.extend({success:function(){},error:function(){}},t),e={source_type:this.source_type};this.business_code&&(e.business_code=this.business_code);var a=this;return $.ajax({url:window.location.protocol+"//acode.zhe800.com/t/verify/get_token",type:"GET",dataType:"JSONP",jsonpCallback:"validateGetToken"+(new Date).getTime(),data:e,success:function(e){e&&1==e.status?(a.validate_type=e.validate_type,a.validate_data.validate_token=e.validate_token,$.extend(a.validate_data,e.validate_adds),a.initValidator(),t.success(e)):t.error(e)},error:function(e){t.error(e)}}),this},n.prototype.initValidator=function(){switch(this.validate_type){case 1:this.validator=o.createIns(this);break;case 2:this.validator=i.createIns(this);break;case 6:this.validator=s.createIns(this)}return this},a.exports=n});/*_combo_cut*/define("statics/zhe/common/js/validate/validateStat",function(t,a,e){var o=function(t){try{$.ajax({type:"GET",url:"https://passport.zhe800.com/j/users/record_aliyun_token?token="+t.validator.statOpts.alitoken+"&type="+t.type+"&time="+t.validator.statOpts.alitimes,dataType:"JSONP"})}catch(a){console.log(a)}};e.exports=o});/*_combo_cut*/define("statics/zhe/components/login_reg_dialog/register",function(a,e,t){var r=a("statics/zhe/components/login_reg_dialog/registertpl.ejs"),s=a("statics/zhe/common/js/validate/validate"),l=a("statics/zhe/common/js/validate/validateStat"),n="rTfi9q",o=null,d=function(a){return'<div class="liwrapper imgwrapper"><input type="text" class="imgwrapperinput" name="captcha_img" value="验证码" title="验证码" onfocus="this.value==this.title?this.value=\'\':null" onblur="this.value==\'\'?this.value=this.title:null" autocomplete="off" disableautocomplete=""></div><img class="captcha-img captchaImg" width="80" height="32" src="'+a+'"><span class="changeImg">换一张</span>'};t.exports={tips:{MOBILE:{DEFAULT:"请输入常用的手机号",NULL:"请输入手机号",INVALID:"手机号格式错误",EXIST:"手机号已存在"},CAPTCHA:{DEFAULT:"验证码",NULL:"请输入验证码",INVALID:"验证码错误，请重试",MAXNUM:"发送验证码过于频繁，请稍后再试",ORIGIN:"发送验证码",REPEAT:"重发验证码"},PASSWORD:{NULL:"请输入密码",MINLENGTH:"密码过短，请输入6-24位字符",MAXLENGTH:"密码过长，请输入6-24位字符",NUMBER:"密码不能使用纯数字",EMPTY:"密码不能包含空格"},CONFIRM:{NULL:"确认密码不能为空",MINLENGTH:"密码过短，请输入6-24位字符",MAXLENGTH:"密码过长，请输入6-24位字符",NUMBER:"密码不能使用纯数字",EMPTY:"密码不能包含空格",NOTEQUAL:"密码不一致，请重试"}},renderForm:function(){return r(!0)},addValidClass:function(a,e){e?(a.addClass("warn1"),a.removeClass("warn2")):(a.addClass("warn2"),a.removeClass("warn1"))},addUpplerClass:function(a,e){e?a.addClass("warn3"):a.removeClass("warn3")},appendError:function(a,e){a.find("span.err").remove().end().append('<span class="err">'+e+"</span>")},isError:function(a,e){return 1===a.find("span.err").size()&&a.find("span.err").text()===e?!0:!1},removeError:function(a){a.find("span.err").remove()},isMobile:function(a){var e=$.trim(a),t={status:1,msg:""};return""==e?(t.status=1,t):/^1\d{10}$/.test(e)?(t.status=0,t):(t.status=2,t)},checkMobile:function(a){var e=this;a.focus(function(){$(this).val()==e.tips.MOBILE.DEFAULT&&$(this).val(""),$(this).removeClass("change").addClass("change")}).blur(function(){var a=this,t=$(a).val(),r=$(a).parents("li");e.removeError(r),e.addValidClass(r,!0),0===t.length||t==e.tips.MOBILE.DEFAULT?(e.appendError(r,e.tips.MOBILE.NULL),$(a).val(e.tips.MOBILE.DEFAULT),e.addValidClass(r,!1),$(this).removeClass("change")):0!=e.isMobile(t).status?(e.appendError(r,e.tips.MOBILE.INVALID),e.addValidClass(r,!1)):e.ajaxCheckMobile(t,function(a){a&&200===a.status||(400==a.status?(e.appendError(r,e.tips.MOBILE.EXIST+'，<a class="loglink" href="javascript:void(0)">立即登录</a>'),e.addValidClass(r,!1)):(e.appendError(r,e.tips.MOBILE.INVALID),e.addValidClass(r,!1)))})})},checkPassword:function(a,e,t,r){var s=this;e.removeClass("change").addClass("change"),r.removeClass("change").addClass("change"),a.focus(function(){var a=this,e=$(a).next();$(a).hide(),e.val("").show().focus()}),t.focus(function(){var a=this,e=$(a).next();$(a).hide(),e.val("").show().focus()}),e.blur(function(){var a=this,e=$(a).val(),t=$(a).parents("li"),i=$(a).prev();s.removeError(t),s.addValidClass(t,!0),s.addUpplerClass(t,!1),0===e.length?($(a).hide(),i.show(),s.appendError(t,s.tips.PASSWORD.NULL),s.addValidClass(t,!1)):e.length<6?(s.appendError(t,s.tips.PASSWORD.MINLENGTH),s.addValidClass(t,!1)):e.length>24?(s.appendError(t,s.tips.PASSWORD.MAXLENGTH),s.addValidClass(t,!1)):/^\d+$/.test(e)?(s.appendError(t,s.tips.PASSWORD.NUMBER),s.addValidClass(t,!1)):r.val().length>0&&r.trigger("blur")}).keyup(function(){var a=this,e=$(a).val(),t=$(a).parents("li");return/\s$/.test(e)?(s.appendError(t,s.tips.PASSWORD.EMPTY),s.addValidClass(t,!1),void $(a).val(e.trim())):(s.isError(t,s.tips.PASSWORD.EMPTY)&&(s.removeError(t),s.addValidClass(t,!0)),void(/[A-Z]/.test(e)?s.addUpplerClass(t,!0):s.addUpplerClass(t,!1)))}),r.blur(function(){var a=this,t=$(a).val(),r=$(a).parents("li"),i=$(a).prev();s.removeError(r),s.addValidClass(r,!0),s.addUpplerClass(r,!1),0===t.length?($(a).hide(),i.show(),s.appendError(r,s.tips.CONFIRM.NULL),s.addValidClass(r,!1)):t.length<6?(s.appendError(r,s.tips.CONFIRM.MINLENGTH),s.addValidClass(r,!1)):t.length>24?(s.appendError(r,s.tips.CONFIRM.MAXLENGTH),s.addValidClass(r,!1)):/^\d+$/.test(t)?(s.appendError(r,s.tips.CONFIRM.NUMBER),s.addValidClass(r,!1)):t!=e.val()&&(s.appendError(r,s.tips.CONFIRM.NOTEQUAL),s.addValidClass(r,!1))}).keyup(function(){var a=this,e=$(a).val(),t=$(a).parents("li");return/\s$/.test(e)?(s.appendError(t,s.tips.CONFIRM.EMPTY),s.addValidClass(t,!1),void $(a).val(e.trim())):(s.isError(t,s.tips.CONFIRM.EMPTY)&&(s.removeError(t),s.addValidClass(t,!0)),void(/[A-Z]/.test(e)?s.addUpplerClass(t,!0):s.addUpplerClass(t,!1)))})},checkCaptcha:function(a){var e=this;a.focus(function(){$(this).val()==e.tips.CAPTCHA.DEFAULT&&$(this).val(""),$(this).removeClass("change").addClass("change")}).blur(function(){var a=this,t=$(a).val(),r=$(a).parents("li");e.removeError(r),e.addValidClass(r,!0),(0===t.length||t==e.tips.CAPTCHA.DEFAULT)&&(e.appendError(r,e.tips.CAPTCHA.NULL),$(a).val(e.tips.CAPTCHA.DEFAULT),e.addValidClass(r,!1),$(this).removeClass("change"))})},sendCaptcha:function(a,e){var t=this;this.clickable=!0,a.click(function(){{var r=this,s=$(r).parents("li");e.parents("li")}return a.attr("disabled","disabled"),t.clickable?(t.clickable=!1,t.removeError(s),t.addValidClass(s,!0),e.trigger("blur"),$(".name").find(".err")[0]?($("#reg_submit").removeAttr("disabled"),void(t.clickable=!0)):void t.ajaxCheckMobile(e.val(),function(i){var l=!0;i&&400==i.status?l=!1:i&&200==i.status&&(0===e.val().length||e.val()==t.tips.MOBILE.DEFAULT?l=!1:0!=t.isMobile(e.val()).status&&(l=!1));var n=$(".validatepalceholder"),d={success:function(){t.ajaxGetAuthToken(function(i){var l=60,n=1e3;if(!i||!i.authenticity_token)return $(r).val(t.tips.CAPTCHA.ORIGIN),t.addValidClass(s,!1),a.removeAttr("disabled"),void(t.clickable=!0);$("#reg_authenticity_token").val(i.authenticity_token);var d={mobile:e.val(),timestamp:(new Date).getTime(),token:i.authenticity_token,validate_token:o.validate_data.validate_token};t.ajaxSendCaptcha(d,function(e){if(1==e.status){var i=$(".login_reg_dialog_wrapper .validatepalceholder");t.removeError(i),t.addValidClass(i,!0),window.reg_timer=$.addTimeout(l,n,function(a){$(r).html("重发验证码( "+(10>a?"0".concat(a):a)+"秒 )").css("cursor","default")},function(){clearInterval(window.reg_timer),counter=l,$(r).html(t.tips.CAPTCHA.REPEAT).css("cursor","pointer"),a.removeAttr("disabled"),t.clickable=!0})}else switch(e.failure_code){case 1:var i=$(".login_reg_dialog_wrapper .validatepalceholder");t.removeError(i),t.appendError(i,e.errors),t.addValidClass(i,!1),a.removeAttr("disabled"),t.clickable=!0,t.getValidate();break;case 7:t.appendError(s,t.tips.CAPTCHA.MAXNUM),$(r).val(t.tips.CAPTCHA.REPEAT),t.addValidClass(s,!1),clearInterval(window.reg_timer),counter=l,$(r).html(t.tips.CAPTCHA.REPEAT).css("cursor","pointer"),a.removeAttr("disabled"),t.clickable=!0}})})},error:function(e){var r=e&&e.msg;t.appendError(n,r||"验证失败"),1==e.failure_code&&t.getValidate(),a.removeAttr("disabled"),t.clickable=!0}};if(2==o.validate_type){var p=$("#validatewrapper .imgwrapperinput");d.content=p.val()==p.attr("title")?"":p.val()}return o.validator?void o.validator.validate(d):(t.appendError(n,"请完成验证"),t.addValidClass(n,!1),l=!1,a.removeAttr("disabled"),void(t.clickable=!0))})):void 0})},startRegister:function(){var a=this;$("#reg_submit").click(function(){var e=$(this),t=$(e).parents("li");a.removeError(t),$(this).attr("disabled","disabled"),a.checkForm()})},checkForm:function(){var a=this,e=a.getElements();for(var t in e)e[t].trigger("blur");return $(".signupnewbox").find(".err")[0]?void $("#reg_submit").removeAttr("disabled"):void a.register()},loginSuccessCall:function(){for($("#dialog_reg_qiandao .close").trigger("click"),i=0;i<PassportCardList.length;i++)PassportCardList[i].parsePassportCookie(),PassportCardList[i].getBottomRow(),PassportCardList[i].drawPassportCard()},register:function(){var a=this;a.ajaxSubmitRegister(a.getRegInfo(),function(e){if(0==e.code&&$.getScript(e.returnTo,function(){"success"==login_status&&(6==o.validate_type&&l({type:3,validator:o.validator}),a.loginSuccessCall(),$("body").trigger("login"),PubSub.fire("user_change"))}),1==e.code)if("verificationCodeError"==e.tipKey){var t=a.getElements().captcha,r=($(t).val(),$(t).parents("li"));a.removeError(r),a.addValidClass(r,!0),a.appendError(r,a.tips.CAPTCHA.INVALID),a.addValidClass(r,!1)}else if("userExisted"==e.tipKey){var t=a.getElements().mobile,r=($(t).val(),$(t).parents("li"));a.removeError(r),a.addValidClass(r,!0),a.appendError(r,a.tips.MOBILE.EXIST+'，<a class="loglink" href="javascript:void(0)">立即登录</a>'),a.addValidClass(r,!1)}else{var t=$("#reg_submit"),r=$(t).parents("li");a.removeError(r),a.appendError(r,e.msg)}$("#reg_submit").removeAttr("disabled")},"json")},bindEvents:function(a){var e=this,t=e.getElements().mobile,r=e.getElements().tipsPwd,s=e.getElements().pwd,i=e.getElements().tipsConfirm,l=e.getElements().confirm,n=e.getElements().captcha,o=e.getElements().sendCaptcha;e.appid=a&&a.appid?a.appid:"",e.checkMobile(t),e.checkPassword(r,s,i,l),e.checkCaptcha(n),e.sendCaptcha(o,t),e.getValidate(),e.startRegister()},getValidate:function(){var a=this;o=new s({source_type:n,success:function(e){6==e.validate_type?o.validator.init({renderTo:"#validatewrapper",nc_scene:"register",afs_appkey:e.validate_adds.afs_appkey,validateSucFn:function(){$validatepalceholder=$(".validatepalceholder"),a.removeError($validatepalceholder),a.addValidClass($validatepalceholder,!0)}}):1==e.validate_type?o.validator.init({renderTo:"#validatewrapper",gt:e.validate_adds.geetest_id}):2==e.validate_type&&o.validator.init({success:function(a){$("#validatewrapper").html(d(a.image_url)),setTimeout(function(){$("#validatewrapper .changeImg,#validatewrapper .captchaImg").bind("click",function(){o.validator.refresh(function(a){$("#validatewrapper .captchaImg").attr("src",a.image_url)})})},10)}})},error:function(){}})},getElements:function(){return{mobile:$("#reg_mobile"),tipsPwd:$("#txt_password"),pwd:$("#reg_password"),tipsConfirm:$("#txt_confirmpwd"),confirm:$("#reg_confirmpwd"),captcha:$("#reg_captcha"),sendCaptcha:$("#send_reg_captcha")}},getRegInfo:function(){var a=this;return{phoneNumber:a.getElements().mobile.val(),password:a.getElements().pwd.val(),passwordConfirmation:a.getElements().confirm.val(),validateToken:o.validate_data.validate_token,content:a.getElements().captcha.val(),step:2,registerSource:"web",deviceId:$.cookie("session_id"),source:"zhe800",domain:"zhe800.com",popup:"1",appid:a.appid}},ajaxCheckMobile:function(a,e){$.ajax({url:"https://passport.zhe800.com/j/users/check_mobile",type:"GET",data:{phoneNumber:a},dataType:"JSONP",jsonpCallback:"mobile_registerDialog",success:function(a){e(a)}})},ajaxGetAuthToken:function(a){$.getJSON("/users/register_access",function(e){a(e)})},ajaxSendCaptcha:function(a,e){$.extend(a,{});var t={phone_number:a.mobile,business_code:a.mobile,step:2,source_type:n,validate_token:a.validate_token};$.ajax({url:window.location.protocol+"//acode.zhe800.com/t/verify/get_token",type:"GET",dataType:"JSONP",jsonpCallback:"send_phone_confirmations"+(new Date).getTime(),data:t,success:function(a){e(a)},error:function(){}})},ajaxSendCaptchaOld:function(a,e){$.extend(a,{});var t={phone_number:a.mobile,timestamp:a.timestamp,authenticity_token:a.token,source:"zhe800",validate_token:a.validate_token};a.type&&(t.type=a.type),$.post("/users/passport/send_phone_confirmations",t,function(a){e(a)})},ajaxSubmitRegister:function(a,e){$.ajax({url:"https://passport.zhe800.com/j/users/register",type:"GET",data:a,dataType:"JSONP",jsonpCallback:"submit_register",success:function(a){e(a)}})}}});/*_combo_cut*/define('statics/zhe/components/scanLogin/jquery.qrcode.min', function(require, exports, module) {

  (function(r){r.fn.qrcode=function(h){var s;function u(a){this.mode=s;this.data=a}function o(a,c){this.typeNumber=a;this.errorCorrectLevel=c;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}function q(a,c){if(void 0==a.length)throw Error(a.length+"/"+c);for(var d=0;d<a.length&&0==a[d];)d++;this.num=Array(a.length-d+c);for(var b=0;b<a.length-d;b++)this.num[b]=a[b+d]}function p(a,c){this.totalCount=a;this.dataCount=c}function t(){this.buffer=[];this.length=0}u.prototype={getLength:function(){return this.data.length},
  write:function(a){for(var c=0;c<this.data.length;c++)a.put(this.data.charCodeAt(c),8)}};o.prototype={addData:function(a){this.dataList.push(new u(a));this.dataCache=null},isDark:function(a,c){if(0>a||this.moduleCount<=a||0>c||this.moduleCount<=c)throw Error(a+","+c);return this.modules[a][c]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var c=p.getRSBlocks(a,this.errorCorrectLevel),d=new t,b=0,e=0;e<c.length;e++)b+=c[e].dataCount;
  for(e=0;e<this.dataList.length;e++)c=this.dataList[e],d.put(c.mode,4),d.put(c.getLength(),j.getLengthInBits(c.mode,a)),c.write(d);if(d.getLengthInBits()<=8*b)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[d][b]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-
  7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(a,c);7<=this.typeNumber&&this.setupTypeNumber(a);null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,c){for(var d=-1;7>=d;d++)if(!(-1>=a+d||this.moduleCount<=a+d))for(var b=-1;7>=b;b++)-1>=c+b||this.moduleCount<=c+b||(this.modules[a+d][c+b]=
  0<=d&&6>=d&&(0==b||6==b)||0<=b&&6>=b&&(0==d||6==d)||2<=d&&4>=d&&2<=b&&4>=b?!0:!1)},getBestMaskPattern:function(){for(var a=0,c=0,d=0;8>d;d++){this.makeImpl(!0,d);var b=j.getLostPoint(this);if(0==d||a>b)a=b,c=d}return c},createMovieClip:function(a,c,d){a=a.createEmptyMovieClip(c,d);this.make();for(c=0;c<this.modules.length;c++)for(var d=1*c,b=0;b<this.modules[c].length;b++){var e=1*b;this.modules[c][b]&&(a.beginFill(0,100),a.moveTo(e,d),a.lineTo(e+1,d),a.lineTo(e+1,d+1),a.lineTo(e,d+1),a.endFill())}return a},
  setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=j.getPatternPosition(this.typeNumber),c=0;c<a.length;c++)for(var d=0;d<a.length;d++){var b=a[c],e=a[d];if(null==this.modules[b][e])for(var f=-2;2>=f;f++)for(var i=-2;2>=i;i++)this.modules[b+f][e+i]=-2==f||2==f||-2==i||2==i||0==f&&0==i?!0:!1}},setupTypeNumber:function(a){for(var c=
  j.getBCHTypeNumber(this.typeNumber),d=0;18>d;d++){var b=!a&&1==(c>>d&1);this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=b}for(d=0;18>d;d++)b=!a&&1==(c>>d&1),this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=b},setupTypeInfo:function(a,c){for(var d=j.getBCHTypeInfo(this.errorCorrectLevel<<3|c),b=0;15>b;b++){var e=!a&&1==(d>>b&1);6>b?this.modules[b][8]=e:8>b?this.modules[b+1][8]=e:this.modules[this.moduleCount-15+b][8]=e}for(b=0;15>b;b++)e=!a&&1==(d>>b&1),8>b?this.modules[8][this.moduleCount-
  b-1]=e:9>b?this.modules[8][15-b-1+1]=e:this.modules[8][15-b-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,c){for(var d=-1,b=this.moduleCount-1,e=7,f=0,i=this.moduleCount-1;0<i;i-=2)for(6==i&&i--;;){for(var g=0;2>g;g++)if(null==this.modules[b][i-g]){var n=!1;f<a.length&&(n=1==(a[f]>>>e&1));j.getMask(c,b,i-g)&&(n=!n);this.modules[b][i-g]=n;e--; -1==e&&(f++,e=7)}b+=d;if(0>b||this.moduleCount<=b){b-=d;d=-d;break}}}};o.PAD0=236;o.PAD1=17;o.createData=function(a,c,d){for(var c=p.getRSBlocks(a,
  c),b=new t,e=0;e<d.length;e++){var f=d[e];b.put(f.mode,4);b.put(f.getLength(),j.getLengthInBits(f.mode,a));f.write(b)}for(e=a=0;e<c.length;e++)a+=c[e].dataCount;if(b.getLengthInBits()>8*a)throw Error("code length overflow. ("+b.getLengthInBits()+">"+8*a+")");for(b.getLengthInBits()+4<=8*a&&b.put(0,4);0!=b.getLengthInBits()%8;)b.putBit(!1);for(;!(b.getLengthInBits()>=8*a);){b.put(o.PAD0,8);if(b.getLengthInBits()>=8*a)break;b.put(o.PAD1,8)}return o.createBytes(b,c)};o.createBytes=function(a,c){for(var d=
  0,b=0,e=0,f=Array(c.length),i=Array(c.length),g=0;g<c.length;g++){var n=c[g].dataCount,h=c[g].totalCount-n,b=Math.max(b,n),e=Math.max(e,h);f[g]=Array(n);for(var k=0;k<f[g].length;k++)f[g][k]=255&a.buffer[k+d];d+=n;k=j.getErrorCorrectPolynomial(h);n=(new q(f[g],k.getLength()-1)).mod(k);i[g]=Array(k.getLength()-1);for(k=0;k<i[g].length;k++)h=k+n.getLength()-i[g].length,i[g][k]=0<=h?n.get(h):0}for(k=g=0;k<c.length;k++)g+=c[k].totalCount;d=Array(g);for(k=n=0;k<b;k++)for(g=0;g<c.length;g++)k<f[g].length&&
  (d[n++]=f[g][k]);for(k=0;k<e;k++)for(g=0;g<c.length;g++)k<i[g].length&&(d[n++]=i[g][k]);return d};s=4;for(var j={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,
  78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var c=a<<10;0<=j.getBCHDigit(c)-j.getBCHDigit(j.G15);)c^=j.G15<<j.getBCHDigit(c)-j.getBCHDigit(j.G15);return(a<<10|c)^j.G15_MASK},getBCHTypeNumber:function(a){for(var c=a<<12;0<=j.getBCHDigit(c)-
  j.getBCHDigit(j.G18);)c^=j.G18<<j.getBCHDigit(c)-j.getBCHDigit(j.G18);return a<<12|c},getBCHDigit:function(a){for(var c=0;0!=a;)c++,a>>>=1;return c},getPatternPosition:function(a){return j.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,c,d){switch(a){case 0:return 0==(c+d)%2;case 1:return 0==c%2;case 2:return 0==d%3;case 3:return 0==(c+d)%3;case 4:return 0==(Math.floor(c/2)+Math.floor(d/3))%2;case 5:return 0==c*d%2+c*d%3;case 6:return 0==(c*d%2+c*d%3)%2;case 7:return 0==(c*d%3+(c+d)%2)%2;default:throw Error("bad maskPattern:"+
  a);}},getErrorCorrectPolynomial:function(a){for(var c=new q([1],0),d=0;d<a;d++)c=c.multiply(new q([1,l.gexp(d)],0));return c},getLengthInBits:function(a,c){if(1<=c&&10>c)switch(a){case 1:return 10;case 2:return 9;case s:return 8;case 8:return 8;default:throw Error("mode:"+a);}else if(27>c)switch(a){case 1:return 12;case 2:return 11;case s:return 16;case 8:return 10;default:throw Error("mode:"+a);}else if(41>c)switch(a){case 1:return 14;case 2:return 13;case s:return 16;case 8:return 12;default:throw Error("mode:"+
  a);}else throw Error("type:"+c);},getLostPoint:function(a){for(var c=a.getModuleCount(),d=0,b=0;b<c;b++)for(var e=0;e<c;e++){for(var f=0,i=a.isDark(b,e),g=-1;1>=g;g++)if(!(0>b+g||c<=b+g))for(var h=-1;1>=h;h++)0>e+h||c<=e+h||0==g&&0==h||i==a.isDark(b+g,e+h)&&f++;5<f&&(d+=3+f-5)}for(b=0;b<c-1;b++)for(e=0;e<c-1;e++)if(f=0,a.isDark(b,e)&&f++,a.isDark(b+1,e)&&f++,a.isDark(b,e+1)&&f++,a.isDark(b+1,e+1)&&f++,0==f||4==f)d+=3;for(b=0;b<c;b++)for(e=0;e<c-6;e++)a.isDark(b,e)&&!a.isDark(b,e+1)&&a.isDark(b,e+
  2)&&a.isDark(b,e+3)&&a.isDark(b,e+4)&&!a.isDark(b,e+5)&&a.isDark(b,e+6)&&(d+=40);for(e=0;e<c;e++)for(b=0;b<c-6;b++)a.isDark(b,e)&&!a.isDark(b+1,e)&&a.isDark(b+2,e)&&a.isDark(b+3,e)&&a.isDark(b+4,e)&&!a.isDark(b+5,e)&&a.isDark(b+6,e)&&(d+=40);for(e=f=0;e<c;e++)for(b=0;b<c;b++)a.isDark(b,e)&&f++;a=Math.abs(100*f/c/c-50)/5;return d+10*a}},l={glog:function(a){if(1>a)throw Error("glog("+a+")");return l.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;256<=a;)a-=255;return l.EXP_TABLE[a]},EXP_TABLE:Array(256),
  LOG_TABLE:Array(256)},m=0;8>m;m++)l.EXP_TABLE[m]=1<<m;for(m=8;256>m;m++)l.EXP_TABLE[m]=l.EXP_TABLE[m-4]^l.EXP_TABLE[m-5]^l.EXP_TABLE[m-6]^l.EXP_TABLE[m-8];for(m=0;255>m;m++)l.LOG_TABLE[l.EXP_TABLE[m]]=m;q.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var c=Array(this.getLength()+a.getLength()-1),d=0;d<this.getLength();d++)for(var b=0;b<a.getLength();b++)c[d+b]^=l.gexp(l.glog(this.get(d))+l.glog(a.get(b)));return new q(c,0)},mod:function(a){if(0>
  this.getLength()-a.getLength())return this;for(var c=l.glog(this.get(0))-l.glog(a.get(0)),d=Array(this.getLength()),b=0;b<this.getLength();b++)d[b]=this.get(b);for(b=0;b<a.getLength();b++)d[b]^=l.gexp(l.glog(a.get(b))+c);return(new q(d,0)).mod(a)}};p.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],
  [4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,
  116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,
  43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,
  3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,
  55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,
  45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];p.getRSBlocks=function(a,c){var d=p.getRsBlockTable(a,c);if(void 0==d)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var b=d.length/3,e=[],f=0;f<b;f++)for(var h=d[3*f+0],g=d[3*f+1],j=d[3*f+2],l=0;l<h;l++)e.push(new p(g,j));return e};p.getRsBlockTable=function(a,c){switch(c){case 1:return p.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return p.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return p.RS_BLOCK_TABLE[4*
  (a-1)+2];case 2:return p.RS_BLOCK_TABLE[4*(a-1)+3]}};t.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,c){for(var d=0;d<c;d++)this.putBit(1==(a>>>c-d-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0);a&&(this.buffer[c]|=128>>>this.length%8);this.length++}};"string"===typeof h&&(h={text:h});h=r.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,
  correctLevel:2,background:"#ffffff",foreground:"#000000"},h);return this.each(function(){var a;if("canvas"==h.render){a=new o(h.typeNumber,h.correctLevel);a.addData(h.text);a.make();var c=document.createElement("canvas");c.width=h.width;c.height=h.height;for(var d=c.getContext("2d"),b=h.width/a.getModuleCount(),e=h.height/a.getModuleCount(),f=0;f<a.getModuleCount();f++)for(var i=0;i<a.getModuleCount();i++){d.fillStyle=a.isDark(f,i)?h.foreground:h.background;var g=Math.ceil((i+1)*b)-Math.floor(i*b),
  j=Math.ceil((f+1)*b)-Math.floor(f*b);d.fillRect(Math.round(i*b),Math.round(f*e),g,j)}}else{a=new o(h.typeNumber,h.correctLevel);a.addData(h.text);a.make();c=r("<table></table>").css("width",h.width+"px").css("height",h.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",h.background);d=h.width/a.getModuleCount();b=h.height/a.getModuleCount();for(e=0;e<a.getModuleCount();e++){f=r("<tr></tr>").css("height",b+"px").appendTo(c);for(i=0;i<a.getModuleCount();i++)r("<td></td>").css("width",
  d+"px").css("background-color",a.isDark(e,i)?h.foreground:h.background).appendTo(f)}}a=c;jQuery(a).appendTo(this)})}})(jQuery);

});
/*_combo_cut*/define("statics/zhe/components/scanLogin/scan_login",function(e,t,a){function n(e){var e=e||{};this.tryTokenNum=3,this.stopTryValidateToken=!1,this.checkStatusIntervalTime=2e3,this.arg={target:e.target||"body",domStr:e.domStr||"",enableDomClass:e.enableDomClass?e.enableDomClass.split(","):[],refreshDom:e.refreshDom||"",callback:e.callback||"",clickCallBack:e.clickCallBack||""}}e("statics/zhe/components/scanLogin/jquery.qrcode.min"),n.prototype.init=function(){var e=this,t=this.arg.target,a=this.arg.enableDomClass,n="";t&&a&&!$("."+a).length&&($(t).append('<div class="scan-tear-angle"></div>'),setTimeout(function(){for(var t=0;t<a.length;t++){var i=a[t];n+=t==a.length-1?"."+i:"."+i+","}$(n).click(function(){var t=e.arg.target,a=$(t),i=$(n);i.hasClass("pc")?i.removeClass("pc"):i.addClass("pc"),setTimeout(function(){a.find(".scan-code-w").length>0?i.hasClass("pc")?(e.stopTryValidateToken=!1,a.find(".scan-code-w").show(),o(e)):(e.stopTryValidateToken=!0,a.find(".scan-code-w").hide()):e.renderCodeWapper(),e.arg&&e.arg.clickCallBack&&e.arg.clickCallBack(i)},50)})},50))},n.prototype.renderCodeWapper=function(){var e=this,t=this.arg.target,a=$(t),n=this.arg.domStr;a.find(".scan-code-w").length<1&&a.append('<div class="scan-code-w">'+n+"</div>"),setTimeout(function(){e.getScanToken()},100)},n.prototype.getScanToken=function(){var e=this;$.ajax({url:"https://passport.zhe800.com/j/users/qrcode/login/get_token",type:"GET",dataType:"JSONP",jsonpCallback:"get_scan_token"+e.tryTokenNum,success:function(t){0==t.code?(e.tryTokenNum=3,e.renderQrCode(t),setTimeout(function(){e.stopTryValidateToken=!1,e.validateTokenStatus(t)},100)):e.tryTokenNum>1&&(e.tryTokenNum-=1,e.getScanToken())},error:function(){e.tryTokenNum>1&&(e.tryTokenNum-=1,e.getScanToken())}})},n.prototype.renderQrCode=function(e){var t=e.cryptToken||"";$(".scan-init-area").html(""),setTimeout(function(){try{var e=$(".scan-init-area").width();document.createElement("canvas").getContext("2d"),$(".scan-init-area").qrcode({render:"canvas",height:e,width:e,margin:10,text:window.location.protocol+"//m.zhe800.com/mz/scanlogin?_lu_m_k=ukm809Ax&crypt_token="+t})}catch(a){var e=$(".scan-init-area").width();$(".scan-init-area").qrcode({render:"table",height:e,width:e,margin:10,text:window.location.protocol+"//m.zhe800.com/mz/scanlogin?_lu_m_k=ukm809Ax&crypt_token="+t})}},100)};var o=function(e){return e.stopTryValidateToken?(e.stopTryValidateToken=!1,e.setTimeoutKey&&clearTimeout(e.setTimeoutKey),!1):void $.ajax({url:"https://passport.zhe800.com/j/users/qrcode/login/check_token",type:"GET",dataType:"JSONP",data:{token:e.token},success:function(t){if(!e.stopTryValidateToken)if(0==t.code){switch(t.status){case"0":e.validateTokenLoginSuccess();break;case"1":break;case"2":e.validateTokenScaned();break;case"3":e.validateTokenScanFail();break;default:e.validateTokenScanFail()}e.stopTryValidateToken||(e.setTimeoutKey&&clearTimeout(e.setTimeoutKey),e.setTimeoutKey=setTimeout(function(){o(e)},e.checkStatusIntervalTime))}else e.validateTokenScanFail()},error:function(){e.stopTryValidateToken||setTimeout(function(){o(e)},e.checkStatusIntervalTime)}})};n.prototype.validateTokenStatus=function(e){var t=this;t.checkStatusIntervalTime=e.interval||t.checkStatusIntervalTime,t.token=e.token,t.cryptToken=e.cryptToken,o(t)},n.prototype.validateTokenLoginSuccess=function(){{var e=this,t=this.arg.target;$(t)}e.stopTryValidateToken=!0,e.validateTokenScanComfirm()},n.prototype.validateTokenScanFail=function(){var e=this,t=this.arg.target,a=$(t);e.stopTryValidateToken||(e.stopTryValidateToken=!0,a.find(".scan-success-area").hide(),a.find(".scan-notice-area").show(),a.find(".scan-part").show(),a.find(".refresh").unbind("click").bind("click",function(){e.getScanToken(),a.find(".scan-notice-area").hide()}))},n.prototype.validateTokenScaned=function(){var e=this,t=this.arg.target,a=$(t);e.stopTryValidateToken||(a.find(".scan-success-area").show(),a.find(".scan-part").hide(),a.find(".back-qrcode").unbind("click").bind("click",function(){e.stopTryValidateToken=!0,e.getScanToken(),a.find(".scan-part").show(),a.find(".scan-success-area").hide()}))},n.prototype.validateTokenScanCancel=function(){};var i=function(e,t){var a,n=window.location.toString(),o=e?e:n;if("object"==$.type(o))return a=$.param(o),n=t?t:n,n+=-1==n.indexOf("?")?"?":"&",n+=a;if("string"==$.type(o)){var i=o.split("?"),c=i[1],a={};if(c&&c.indexOf("&")){var r=c.split("&");$.each(r,function(e,n){if(n&&n.indexOf("=")){var o=n.split("=");if("string"==$.type(t)&&t==o[0])return a=null==o[1]?"":o[1],!0;a[o[0]]=o[1]}})}}return a};n.prototype.validateTokenScanComfirm=function(){var e=this,t=i(),a=t.return_to;e.stopTryValidateToken=!0,window.location.href=a?decodeURIComponent(a):window.location.protocol+"//www.zhe800.com"},a.exports=n});/*_combo_cut*/define("statics/zhe/dealList/js/taopi18610",function(t,e){function a(){return n=new p({source_type:"5",success:function(t){6==t.validate_type?n.validator.init({renderTo:"#number_validate_box",nc_scene:"login",afs_appkey:t.validate_adds.afs_appkey,validateSucFn:function(){numberLoginPassportCard.loginMsg.html("")}}):1==t.validate_type?n.validator.init({renderTo:"#number_validate_box",gt:t.validate_adds.geetest_id}):2==t.validate_type&&n.validator.init({success:function(t){$("#number_validate_box").html(h(t.image_url)),setTimeout(function(){$("#number_validate_box .changeImg,#number_validate_box .captchaImg").bind("click",function(){n.validator.refresh(function(t){$("#number_validate_box .captchaImg").attr("src",t.image_url)})})},10)}})},error:function(){}})}function s(){return i=new p({source_type:"DjbSdo",success:function(t){6==t.validate_type?i.validator.init({renderTo:"#phone_validate_box",nc_scene:"login",afs_appkey:t.validate_adds.afs_appkey,validateSucFn:function(){phoneLoginPassportCard.loginMsg.html("")}}):1==t.validate_type?i.validator.init({renderTo:"#phone_validate_box",gt:t.validate_adds.geetest_id}):2==t.validate_type&&i.validator.init({success:function(t){$("#phone_validate_box").html(h(t.image_url)),setTimeout(function(){$("#phone_validate_box .changeImg,#phone_validate_box .captchaImg").bind("click",function(){i.validator.refresh(function(t){$("#phone_validate_box .captchaImg").attr("src",t.image_url)})})},10)}})},error:function(){}})}function o(){function t(t,e,a,s){s.drawPassportWait=function(t){$(".tao_r .left .hwid2").hide();var e=new $.Buffers;e.push('<div class="pptitle">折800<b>通行证</b><div class="ppthree">'),e.push(this.cardTitle),e.push('</div></div><div class="ppcontent clear" id="ppcontid"><div class="ppWaitMsg">'),e.push(t),e.push("</div></div>"),this.cElement.html(e.toString())},s._drawPassportCard=function(){$(".tao_r .left .hwid2").hide(),$(".tao_r .left  .scan-tear-angle").hide();var t=new $.Buffers;t.push('<div class="pptitle2"><span>折800<b>通行证</b><div class="ppthree">'+this.cardTitle+"</div></span>"),t.push('<a class="exit" href="https://passport.zhe800.com/sso/logout?return_to=%2F%2Fwww.zhe800.com%2Flogin">退出</a>'),t.push("</div>"),t.push('<div class="ppcontent clear" id="ppcontid"><div class="listContA"></div><div class="middle">'),t.push("<ul>"),""!=this.defaultApp&&t.push('<li class="current">'+this.defaultApp+"</li>");for(var e=0;e<this.bottomRow[0].length;e++)t.push('<li><a href="'+this.bottomRow[0][e].url+'" target="_blank">'+this.bottomRow[0][e].name+"</a></li>"),e!=this.bottomRow[0].length-1&&t.push("<li>|</li>");!function(e){for(var a=0;a<e.bottomRow[1].length;a++)t.push('<li><a href="'+e.bottomRow[1][a].url+'" target="_blank">'+e.bottomRow[1][a].name+"</a></li>"),a!=e.bottomRow[1].length-1&&t.push("<li>|</li>")}(this),t.push('<li class="profile"');var a=(PassportSC.campUrl,$.getStringLen(this.cookie.username)),s=this.cookie.userid.indexOf("@"),o=this.cookie.userid.substr(s+1);this.domainList.toString().indexOf(o)<0||a>this.cookie.userid.length,t.push('> | <a href="//www.zhe800.com/profile/my_rank" target="_blank">个人中心</a></li></ul></div>'),$("#login-wapper").removeClass("not-login-w"),this.cElement.html(t.toString())},s.drawPassportInfo=function(){var t=this.cookie,e=["未知","邮箱","手机","新浪微博","QQ","淘宝","人人网"],a=t.userid,s=-1==document.location.href.indexOf("login")?"?return_to="+encodeURIComponent(document.location.href):"?return_to="+encodeURIComponent(location.protocol+"//www.zhe800.com");0==t.nkd&&(a="<span>"+e[t.regw]+'</span>用户，请<a href="//passport.tuan800.com/account/setting'+s+'" target="_blank" class="user">设置昵称</a>');var o=new $.Buffers;o.push("<ul><li>您好，"+a+"</li>"),o.push("<li><p>欢迎您，您已经成功登录折800通行证！ </p></li><li>现在即可畅游折800所有服务。</li></ul>"),this.iElement.html(o.toString()),$(".login-notices").hide(),$(".diapassport .warning").html('<em class="m2"></em>您已经成功登录折800通行证！')},s.loginApp=function(){if(s.validateIns&&6==s.validateIns.validate_type&&validateStat({type:1,validator:s.validateIns.validator}),$.getParm().return_to){var t=$.getParm().return_to;$.cookie("crossdomain",PassportSC.getTime(),{path:"/",expires:1});var e=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/;if(e.test(t)){var a=e.exec(t),o=a[0]||"";if(/zhe800.com$|tuan800.com$/.test(o))return window.returnToCenter=function(){window.location.href=decodeURIComponent(t)},setTimeout(window.returnToCenter,2e3),!1;window.returnToCenter=function(){window.location.href="//www.zhe800.com"},setTimeout(window.returnToCenter,2e3)}}else{try{PubSub.fire("user_change")}catch(n){}window.returnToCenter=function(){window.location.href="//www.zhe800.com"},setTimeout(window.returnToCenter,3e3)}},s.logoutApp=function(){s.loginApp(),$(".diapassport .warning").html('<em class="m2"></em>登录后才能完成该操作!'),PubSub.fire("user_change")},s.showMsg=function(t){this.loginMsg&&("邮箱未激活"==t&&(t+=',<span class="comfir_mail">去激活邮箱</span>'),this.loginMsg.html(t).show())},s.drawPassport(e)}function e(t){$(".tao_r .left .hwid2").show(),$(".tao_r .left .hwid2 input:radio").off("change.exchange").on("change.exchange",function(){"0"===$(this).val()?(window.login_with_mobile=!1,$(".tao_r .left .login_mid").show(),$(".tao_r .left .login_mid_phone").hide(),r.doStat("click_v0",{clickkey:"zhanghaodenglu",data:(new Date).getTime()})):(drawPhoneLogin||(PassportSC.drawPassportNew("ppLogin",p,{appid:2001}),drawPhoneLogin=!0),window.login_with_mobile=!0,$(".tao_r .left .login_mid").hide(),$(".tao_r .left .login_mid_phone").show(),r.doStat("click_v0",{clickkey:"dongtaimadenglu",data:(new Date).getTime()}))}),t.cElement.find('form[name="loginform"]').on("focus",".ddpw_1_text_cls",function(){var t=$(this);t.hide(),t.prev().show(),setTimeout(function(){t.prev().focus()},10)}),t.cElement.find('form[name="loginform"]').on("focus",".ddpw_1_cls",function(){$(this).attr("data-allow-input","1")}).on("blur",".ddpw_1_cls",function(){var t=$(this);t.attr("data-allow-input","0"),""==t.val()&&(t.next().show(),t.hide())}),t.cElement.find('form[name="loginform"]').on("input",".ddpw_1_cls",function(){var t=$(this);window.login_with_mobile&&"0"===t.attr("data-allow-input")&&t.val("")}),t.cElement.find(".morel").on("click.morel",function(){var t=$(this).find(".moreicon");t.hasClass("iconup")?(t.removeClass("iconup"),$(this).parent().next().slideUp()):(t.addClass("iconup"),$(this).parent().next().slideDown())});var e=!0;$(".tao_r").delegate(".comfir_mail","click",function(){{var t="https://passport.zhe800.com/users/email_signed?email="+encodeURIComponent($("#ddusername").val());$(this)}e&&(e=!1,$.getScript("https://passport.zhe800.com/api/ued/retries/send_active_email_confirmation?email="+encodeURIComponent($("#ddusername").val())+"&secret="+encodeURIComponent(window.login_error_result.secret||""),{callback:function(){window.location=t}}))})}function o(s,o,i){var r=PassportCardList[s];numberLoginPassportCard=r,r.rootElement=function(){this.sElement=o,o.parent().append('<span class="login-notices">密码登录在这里</span><h3 class="hwid2"><input type="radio" name="loginppr" id="loginppr" checked="checked" value="0"/> <label for="loginppr">折800账号登录 &nbsp;&nbsp;&nbsp;</label><input type="radio" class="phonecode" name="loginppr" id="phonecode" value="1"/> <label for="phonecode" class="phonecode">手机动态码登录</label></h3><div class="login_mid"></div>'),this.cElement=o.nextAll(".login_mid")},r._drawLoginForm=function(){var t=new $.Buffers,o=document.location.href,n=-1==o.indexOf("login")?"?return_to="+encodeURIComponent(document.location.href):-1==o.indexOf("return_to")?"?return_to="+encodeURIComponent(location.protocol+"//www.zhe800.com"):"?return_to="+encodeURIComponent(o.match(/return_to\=([^&]+)/)[1]||location.protocol+"//www.zhe800.com");t.push('<form id="number-login-form" method="post" onsubmit="return PassportCardList['+s+'].doLogin();" name="loginform">'),t.push(" <ul>"),t.push('     <li class="username-and-password valueone"><div class="user_name"></div><div class="user_keywords"></div>'),t.push('         <input value="邮箱/手机号/用户名" title="邮箱/手机号/用户名" onfocus="this.value==this.title?this.value=\'\':null" onblur="this.value==\'\'?this.value=this.title:null" id="ddusername" name="username" type="text" autocomplete="off" disableautocomplete="" class="t" />'),t.push('         <input style="display:none" value="" name="password" id="ddpw_1" class="ddpw_1_cls gphcode t" type="password" data-allow-input="0" autocomplete="off" disableautocomplete="" /><input value="请输入密码" class="ddpw_1_text_cls gphcode t" id="ddpw_1_text" type="text" autocomplete="off" disableautocomplete="" />'),t.push("     </li>"),t.push(" </ul>"),t.push('<div id="number_validate_box" class="number_validate_box"></div>'),t.push('<label style="display:none;"> <strong>&nbsp;</strong><input type="checkbox" value="yes" checked="checked" name="frontend_remember_me"><span>下次自动登录</span></label>'),t.push('<label class="verification_code"><div class="error" id="pperrmsg"></div></label>'),t.push('<label><input type="submit" value="" name="commit" class="b" id="login_submit_number"><a target="_blank" class="forget_num" href="https://passport.zhe800.com/users/password/new">忘记密码？</a></label>'),t.push("</form>");var i=this.appid;t.push('	<div class="othlogin">'),t.push("<h2>还可以使用这些账号登录：</h2>"),t.push("<p>"),t.push('<a class="qq" href="https://passport.tuan800.com/sso/partner_login/qq_connect'+n+"&appid="+i+'"></a>'),t.push('<a class="baidu" href="https://passport.tuan800.com/sso/partner_login/baidu'+n+"&appid="+i+'"></a>'),t.push('<a class="morel"><span>更多</span><span class="moreicon"></span></a>'),t.push("</p>"),t.push('<p class="more_login hidden">'),t.push('<a class="renren" href="https://passport.tuan800.com/sso/partner_login/renren'+n+"&appid="+i+'"></a>'),t.push('<a class="taobao" href="https://passport.tuan800.com/sso/partner_login/taobao'+n+"&appid="+i+'"></a>'),t.push("</p>"),t.push('	</div><div id="capslock">大写锁定已打开!</div>'),this.cElement.html(t.toString()),r.validateIns=a(),e(r)},r.doLogin=function(){if(this.eInterval)return!1;try{arguments[0]&&PassportCardList[s].doLogin(),this.intervalCount=0,this.sElement.empty(),this.loginParams={};var t=$("#number-login-form [name=username]"),e=$("#number-login-form [name=password]");if(this.loginParams.username=$.trim(t.val()),this.loginParams.password=$.trim(e.val()),!this.loginParams.username||this.loginParams.username==t.attr("title"))return this.reportMsg("1"),t.focus(),!1;if(!this.loginParams.password)return this.reportMsg("4"),e.focus(),!1;var o=this,i={success:function(){return o.loginHandle(0,o.sElement,o.loginFailCall.bindFunc(o),o.loginSuccessCall.bindFunc(o))},error:function(t){var e=t&&t.msg;o.reportMsg("error",{message:e||"验证失败"}),1==t.failure_code&&a()}};if(2==n.validate_type){var r=$("#number-login-form .imgwrapperinput");if(r.val()==r.attr("title")||""==r.val())return void o.reportMsg("error",{message:"请填写验证码"});i.content=r.val()==r.attr("title")?"":r.val()}if(!n.validator)return void o.reportMsg("error",{message:"请完成验证"});n.validator.validate(i)}catch(l){console.log(l)}finally{return!1}},r.loginHandle=function(t,e,a,s){if("object"!=typeof e)return!1;if(0==$.cookie())return a(),!1;var o=$.getBrowserType(),i=screen.width;""==this.domain&&(this.domain=this.getDomain());var r=this.getTime(),l=hex_sha512?hex_sha512(this.loginParams.password):this.loginParams.password,p={http:this.loginProtocal,url:this.loginURL,userName:encodeURIComponent(this.loginParams.username),pwd_sha512:encodeURIComponent(l),appid:this.appid,pc:t,s:r,b:o,w:i,version:this.version,popup:this.getusername()},c=this.login_urltpl;try{"https"==this.loginProtocal&&(c=this.logins_urltpl),this.http_url=$.ParseTpl(c,p);var d=this.http_url}catch(u){"https"==this.loginProtocal&&(c=this.https_urltpl),this.http_url=$.ParseTpl(c,p);var d=this.http_url;window.console&&console.info(u)}d+="&domain="+this.domain,d+="&validateToken="+n.validate_data.validate_token,login_status="",login_error_result="",login_need_captcha=!1,$.ajax({url:d,type:"GET",dataType:"JSONP",jsonpCallback:"pwd_user_login"+(new Date).getTime(),success:function(t){t&&400==t.code&&(login_status="error",t.message=t.tip,login_error_result=t)},error:function(){}});var h=this;return this.eInterval=setInterval(function(){h.loginIntervalProc(a,s,e)},100),!1},t(s,o,i,r)}function p(a,o,r){var l=PassportCardList[a];phoneLoginPassportCard=l,l.rootElement=function(){this.sElement=o,o.parent().append('<div class="login_mid_phone"></div>'),this.cElement=o.nextAll(".login_mid_phone")},l._drawLoginForm=function(){var t=new $.Buffers,o=document.location.href,n=-1==o.indexOf("login")?"?return_to="+encodeURIComponent(document.location.href):-1==o.indexOf("return_to")?"?return_to="+encodeURIComponent(location.protocol+"//www.zhe800.com"):"?return_to="+encodeURIComponent(o.match(/return_to\=([^&]+)/)[1]||location.protocol+"//www.zhe800.com");t.push('<form id="phone-login-form" method="post" onsubmit="return PassportCardList['+a+'].doLogin();" name="loginform">'),t.push(" <ul>"),t.push('     <li class="username-and-password valueone valuetwo">'),t.push('     	<div class="user_name"></div>'),t.push('         <input value="请输入注册手机号" title="请输入注册手机号" onfocus="this.value==this.title?this.value=\'\':null" onblur="this.value==\'\'?this.value=this.title:null" id="ddusername_phone" name="username" type="text" autocomplete="off" disableautocomplete="" class="t" />'),t.push("     </li>"),t.push("   	<li>"),t.push('     	<div id="phone_validate_box" class="phone_validate_box"></div>'),t.push("     </li>"),t.push("     <li>"),t.push('     	<div class="user_keywords"></div>'),t.push('         <input style="display:none" value="" name="password" id="ddpw_1_phone" class="ddpw_1_cls gphcode t" type="text" data-allow-input="0" autocomplete="off" disableautocomplete="" /><input value="动态密码" class="ddpw_1_text_cls gphcode t" id="ddpw_1_text" type="text" autocomplete="off" disableautocomplete="" /><input type="button" class="getdphcode getdphcode-btn send_reg_captchado t" value="获取动态密码" data-text-ready="获取动态密码" data-text-submit="提交中..."/>'),t.push("     </li>"),t.push(" </ul>"),t.push('<label style="display:none;"> <strong>&nbsp;</strong><input type="checkbox" value="yes" checked="checked" name="frontend_remember_me"><span>下次自动登录</span></label>'),t.push('<label class="verification_code"><div class="error" id="pperrmsg_phone"></div></label>'),t.push('<label><input type="submit" value="" name="commit" class="b" id="login_submit_phone" ><a target="_blank" class="forget_num" href="https://passport.zhe800.com/users/password/new">忘记密码？</a></label>'),t.push("</form>");var i=this.appid;t.push('	<div class="othlogin">'),t.push("<h2>还可以使用这些账号登录：</h2>"),t.push("<p>"),t.push('<a class="qq" href="https://passport.tuan800.com/sso/partner_login/qq_connect'+n+"&appid="+i+'"></a>'),t.push('<a class="baidu" href="https://passport.tuan800.com/sso/partner_login/baidu'+n+"&appid="+i+'"></a>'),t.push('<a class="morel"><span>更多</span><span class="moreicon"></span></a>'),t.push("</p>"),t.push('<p class="more_login hidden">'),t.push('<a class="renren" href="https://passport.tuan800.com/sso/partner_login/renren'+n+"&appid="+i+'"></a>'),t.push('<a class="taobao" href="https://passport.tuan800.com/sso/partner_login/taobao'+n+"&appid="+i+'"></a>'),t.push("</p>"),t.push('	</div><div id="capslock">大写锁定已打开!</div>'),this.cElement.html(t.toString()),l.validateIns=s(),e(l);{var r=$(".send_reg_captchado"),p=$("#ddusername_phone");$("#pperrmsg_phone")}setTimeout(function(){u(r,"login",p)},0)},l.doLogin=function(){if(this.eInterval)return!1;try{arguments[0]&&PassportCardList[a].doLogin(),this.intervalCount=0,this.sElement.empty(),this.loginParams={};var t=$("#phone-login-form [name=username]"),e=$("#phone-login-form [name=password]");return this.loginParams.username=$.trim(t.val()),this.loginParams.password=$.trim(e.val()),this.loginParams.username&&this.loginParams.username!=t.attr("title")?/^1\d{10}/.test(this.loginParams.username)?this.loginParams.password?this.loginHandle(0,this.sElement,this.loginFailCall.bindFunc(this),this.loginSuccessCall.bindFunc(this)):(this.reportMsg("error",{message:"请填写动态密码"}),!1):(this.reportMsg("error",{message:"手机号格式有误"}),!1):(this.reportMsg("1"),t.focus(),!1)}catch(s){console.log(s)}finally{return!1}},l.loginHandle=function(t,e,a,s){if("object"!=typeof e)return!1;if(0==$.cookie())return a(),!1;var o=$.getBrowserType(),r=screen.width;""==this.domain&&(this.domain=this.getDomain());var l=this.getTime(),p=hex_sha512?hex_sha512(this.loginParams.password):this.loginParams.password,c={http:this.loginProtocal,url:this.loginURL,userName:encodeURIComponent(this.loginParams.username),pwd_sha512:encodeURIComponent(p),appid:this.appid,pc:t,s:l,b:o,w:r,version:this.version,popup:this.getusername()},d=this.login_urltpl;try{"https"==this.loginProtocal&&(d=this.logins_urltpl),this.http_url=$.ParseTpl(d,c);var u=this.http_url}catch(h){"https"==this.loginProtocal&&(d=this.https_urltpl),this.http_url=$.ParseTpl(d,c);var u=this.http_url;window.console&&console.info(h)}u+="&domain="+this.domain,u+="&validateToken="+n.validate_data.validate_token,u+="&sms_dynamic_login=true",login_status="",login_error_result="",login_need_captcha=!1;var m={phoneNumber:encodeURIComponent(this.loginParams.username),validateToken:i.validate_data.validate_token,content:encodeURIComponent(this.loginParams.password),source:"tao800",businessCode:"ql_"+encodeURIComponent(this.loginParams.username)};$.ajax({url:"https://passport.zhe800.com/j/users/pc/quick_login",type:"GET",dataType:"JSONP",data:m,jsonpCallback:"phone_user_login"+(new Date).getTime(),success:function(t){t&&200!=t.status&&(login_status="error",t.message=t.msg,login_error_result=t)},error:function(){}});var g=this;return this.eInterval=setInterval(function(){g.loginIntervalProc(a,s,e)},100),!1},t(a,o,r,l)}var c,d,u=function(t,e,a){function o(){t.removeAttr("disabled"),t.val(t.attr("data-text-ready")),c=!0}function n(){var e=60;d&&clearInterval(d),d=setInterval(function(){e-=1,e>0?t.val("重发验证("+e+")"):o()},1e3)}c=!0,t.click(function(){var e=this,p=($(e).parents("li"),a.parents("li"),$("#pperrmsg_phone"));if(r.doStat("click_v0",{clickkey:"huoqudongtaima",data:(new Date).getTime()}),a.val()===a.attr("title")||""===a.val())return p.text("请输入手机号"),!1;if(!/^1\d{10}/.test(a.val()))return p.text("手机号格式有误"),!1;var d={success:function(){t.attr("disabled","disabled"),t.val(t.attr("data-text-submit")),c&&(c=!1,l.ajaxGetAuthToken(function(t){if(!t||!t.authenticity_token)return p.text("请重新获取手机动态码"),o(),!1;var e={phone_number:a.val(),business_code:"ql_"+a.val(),step:2,source_type:i.source_type,validate_token:i.validate_data.validate_token,business_params:JSON.stringify({phone_number:a.val()})};$.ajax({url:window.location.protocol+"//acode.zhe800.com/t/verify/get_token",type:"GET",dataType:"JSONP",jsonpCallback:"send_phone_confirmations"+(new Date).getTime(),data:e,success:function(t){if(1==t.status)p.text("验证码发送成功"),window.sms_has_timer=t.retry_at-6e4,n();else switch(t.msg.error_status){case"4001":p.html('手机号未注册，请<a class="pperrmsgcl" href="https://passport.zhe800.com/users/signup" target="_blank">注册折800账号</a>'),o();break;default:p.text(t.msg.error_content),s(),o()}},error:function(){}})}))},error:function(t){var e=t&&t.msg;p.text(e||"验证失败"),1==t.failure_code&&s(),o()}};if(2==i.validate_type){var u=$("#phone_validate_box .imgwrapperinput");if(u.val()==u.attr("title")||""==u.val())return void p.text("请填写验证码");d.content=u.val()==u.attr("title")?"":u.val()}return i.validator?void i.validator.validate(d):(p.text("请完成验证"),!1)})};PubSub.add("ready",function(){$("#ppLogin").length>0&&PassportSC.drawPassportNew("ppLogin",o,{appid:2001})})}var n=null,i=null,r=t("statics/zhe/common/js/stat/picstat"),l=t("statics/zhe/components/login_reg_dialog/register"),p=t("statics/zhe/common/js/validate/validate");validateStat=t("statics/zhe/common/js/validate/validateStat"),drawPhoneLogin=!1,numberLoginPassportCard=null,phoneLoginPassportCard=null;var c=t("statics/zhe/components/scanLogin/scan_login"),d=function(){return'<div class="scan-wapper" > <p class="scan-t">手机扫码，安全登录</p> <div class="scan-part">  <p class="scan-n"><i></i>打开<a href="//www.zhe800.com/app#page1" target="_blank">折800APP</a>→我的→扫一扫</p>  <div class="scan-area">   <div class="scan-init-area"></div>   <div class="scan-notice-area">    <p class="scan-w">二维码失效</p>    <p class="refresh">刷新</p>   </div>  </div> </div> <div class="scan-success-area">   <p class="scan-s-pic"></p>   <p class="scan-s-w">扫描成功！</p>   <p class="comfir-login">请在手机上确认登录</p>   <p class="back-qrcode">返回二维码登录</p> </div> <p class="scan-r"><span class="pwd-login">密码登录</span><a href="https://passport.zhe800.com/users/signup" target="_blank">立即注册</a></p></div>'},u=function(){var t=new c({target:"#login-wapper",domStr:d(),enableDomClass:"scan-tear-angle,pwd-login",refreshDom:"",callback:function(){},clickCallBack:function(t){$(t).hasClass("pc")?($("#login-wapper .login-notices").html("密码登录在这里"),$("#login-wapper .othlogin").addClass("zindex20001")):($("#login-wapper .othlogin").removeClass("zindex20001"),$("#login-wapper .login-notices").html("扫码登录更安全"))}});"none"!=$(".tao_r .hwid2").css("display")?(t.init(),setTimeout(function(){t.renderCodeWapper(),$("#login-wapper").addClass("not-login-w").show(),$(".scan-tear-angle,.pwd-login").addClass("pc")},20)):$("#login-wapper").show()},h=function(t){return'<div class="captcha_box_new" ><input type="text" class="imgwrapperinput" name="captcha_img" value="验证码" title="验证码" onfocus="this.value==this.title?this.value=\'\':null" onblur="this.value==\'\'?this.value=this.title:null" autocomplete="off" disableautocomplete=""><img class="captcha-img captchaImg" width="80" height="32" src="'+t+'"><span class="changeImg">换一张</span></div>'};$.ajax({url:"/cn/z_key/user_infos",type:"GET",dataType:"JSON",success:function(t){0==t.login&&$.cookie("ppinf","",{path:"/",expires:-1,domain:".zhe800.com"}),o(),u()}}),e.init=o});